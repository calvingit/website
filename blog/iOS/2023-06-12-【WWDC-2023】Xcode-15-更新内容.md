---
title: ã€WWDC 2023ã€‘Xcode 15 æ›´æ–°å†…å®¹
description: "ã€WWDC 2023ã€‘Xcode 15 æ›´æ–°å†…å®¹"
slug: whats-new-in-xcode-15
date: 2023-06-12
tags: [iOS]
---

WWDC 2023 è¿™å‡ å¤©é™†ç»­æ”¾å‡ºå„ä¸ªä¸»é¢˜çš„è§†é¢‘ï¼ŒæŒ‘äº†å‡ ä¸ªæˆ‘è®¤ä¸ºå€¼å¾—çœ‹çœ‹çš„ï¼Œå­¦ä¹ ä¸€ä¸‹å¹¶åšä¸ªç¬”è®°ã€‚å½“ç„¶ç›®å‰å¤§éƒ¨åˆ†ç³»ç»Ÿã€è½¯ä»¶éƒ½æ˜¯ Beta ç‰ˆæœ¬ï¼Œæ­£å¼ç‰ˆæœ¬å¯èƒ½è¿˜ä¼šæ›´æ”¹ï¼Œä½†æ•´ä½“æ›´æ–°å†…å®¹æ˜¯ä¸ä¼šå¤§å˜çš„ã€‚

æˆ‘æŒ‘çš„ç¬¬ä¸€ä¸ªè§†é¢‘æ˜¯ [What's new in Xcode 15](https://developer.apple.com/videos/play/wwdc2023/10165)ï¼Œå·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚

ä¸‹é¢å°†æ ¹æ®è§†é¢‘çš„æ’­æ”¾é¡ºåºï¼Œåˆ†æå¹¶å®è·µå„ä¸ªæ®µè½éƒ¨åˆ†ã€‚

> 2023 å¹´ 6 æœˆ 9 æ—¥ï¼Œæµ‹è¯• Xcode 15 Beta ç‰ˆæœ¬ã€‚

<!-- truncate -->

## [Code completion updates](https://developer.apple.com/videos/play/wwdc2023/10165/?time=89)

**1. æ ¹æ®æ–‡ä»¶åï¼Œå½“ä½ æƒ³è¾“å…¥ç›¸åŒåå­—çš„ struct æˆ– class æ—¶ï¼Œä¼šæ ¹æ®ä½ è¾“å…¥çš„é¦–å­—æ¯åŒ¹é…æ–‡ä»¶åã€‚**

æ¯”å¦‚æ–‡ä»¶åä¸º"ThisIsACodeCompleteDemo.swift"ï¼Œå½“ä½ åœ¨æ–‡ä»¶é‡Œè¾“å…¥"struct t"æ—¶ï¼Œè‡ªåŠ¨å¼¹å‡º"ThisIsACodeCompleteDemo"ä¸ºé¦–é€‰ã€‚

![alt text](https://cdn.zhangwen.site/uPic/mIi3A7.png)

**2. ä¼šæ ¹æ®ä¸Šä¸‹æ–‡åˆ†ææ¨æ–­ä½ éœ€è¦è®¾ç½®çš„å±æ€§æˆ–å‚æ•°ã€‚**

å¯¹ Text è®¾ç½®äº†`.font(.title)`ä¹‹åï¼Œå†æ¬¡è¾“å…¥"."ï¼Œä¼šæç¤º`.bold()` ã€ `.fontWeight(_ weight:)`ç­‰å­—ä½“ç›¸å…³çš„ modifierã€‚

![alt text](https://cdn.zhangwen.site/uPic/VYwvFA.png)

å¦‚æœæ˜¯å›¾ç‰‡ï¼Œé¦–é€‰æ¨èçš„æ˜¯`.resizable`ã€‚

![alt text](https://cdn.zhangwen.site/uPic/Ggo2GW.png)

## [What's new in asset catalogs](https://developer.apple.com/videos/play/wwdc2023/10165/?time=225)

**1. åœ¨ Assets.xcassets é‡Œé¢æ·»åŠ èµ„æºæ–‡ä»¶ä¼šè‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„å¸¸é‡åç§°**

> è¿™ä¸ªåŠŸèƒ½å±…ç„¶å†…ç½®äº†ï¼Œæ¿€åŠ¨å•Šï¼Œæ³ªæµæ»¡é¢ï¼

æ”¯æŒçš„èµ„æºæ–‡ä»¶åŒ…æ‹¬ä»¥ä¸‹å‡ ç§ï¼š

- Color Set: é¢œè‰²
- Image Set: å›¾ç‰‡
- Symbol Image: ç¬¦å·å›¾ç‰‡ï¼Œæ¯”è¾ƒç‰¹åˆ«çš„ svg æ ¼å¼

æ³¨æ„ Data Set ä¸åœ¨æ”¯æŒåˆ—è¡¨ï¼Œä¾ç„¶ä½¿ç”¨ `NSDataAsset` ã€‚

ä¸‹é¢é€šè¿‡å‡ ä¸ªå®ä¾‹æ¥äº†è§£ä¸€ä¸‹å…·ä½“çš„æ“ä½œï¼Œåœ¨ `Assets.xcassets` åˆ†åˆ«æ·»åŠ ä¸€ä¸ª "About" çš„ Symbol Imageï¼Œ"baseline_bookmarks_black_48pt"çš„ Imageï¼Œå¸¦ "Home" ç›®å½•çš„"tab-bookmarks" Imageï¼Œ"MainColor"çš„ Color Setï¼Œ"mock-login-response" çš„ JSON æ–‡ä»¶ã€‚

![alt text](https://cdn.zhangwen.site/uPic/image-20230610141026780.png)

ç”¨æ³•å¦‚ä¸‹ï¼š

```swift
import SwiftUI

struct ThisIsACodeCompleteDemo: View {
    var body: some View {
        VStack {
            Text("This is a code complete demo")
                .font(.title)
                .bold()
            // "About" çš„ Symbol Image
            Image(.about)
            // "baseline_bookmarks_black_48pt"çš„ Image
            Image(.baselineBookmarksBlack48Pt)
            // å¸¦ "Home" ç›®å½•çš„"tab-bookmarks" Image
            Image(.tabBookmarks)
                .foregroundColor(.main) // "MainColor"çš„ Color Set

            Text(loadDataSet() ?? "No data")
        }
    }

    func loadDataSet() -> String? {
        guard let data = NSDataAsset(name: "mock-login-response")?.data else {
            return nil
        }

        return String(data: data, encoding: .utf8)
    }
}
```

è¿™æ˜¯æ€ä¹ˆåšåˆ°çš„å‘¢ï¼Ÿå…¶å®å°±æ˜¯ Xcode ç¼–è¯‘æ—¶è‡ªåŠ¨ç”Ÿæˆäº†ä¸€ä¸ª `GeneratedAssetSymbols.swift`ï¼Œæ ¹æ® Assets ç±»å‹ ç”Ÿæˆäº† 2 ä¸ª structï¼š`ColorResource`, `ImageResource` ã€‚ä¸¤è€…çš„ä»£ç æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬å°±çœ‹ `ImageResource` ï¼š

```swift
/// An image resource.
struct ImageResource: Hashable {

    /// An asset catalog image resource name.
    fileprivate let name: String

    /// An asset catalog image resource bundle.
    fileprivate let bundle: Bundle

    /// Initialize an `ImageResource` with `name` and `bundle`.
    init(name: String, bundle: Bundle) {
        self.name = name
        self.bundle = bundle
    }

}
```

ç„¶åå¯¹ UIKit çš„ `UIImage` å’Œ SwiftUI çš„ `Image` å„å†™äº†ä¸€ä¸ªåˆå§‹åŒ– extension :

```swift
@available(iOS 11.0, tvOS 11.0, *)
@available(watchOS, unavailable)
extension UIKit.UIImage {

    /// Initialize a `UIImage` with an image resource.
    convenience init(resource: ImageResource) {
#if !os(watchOS)
        self.init(named: resource.name, in: resource.bundle, compatibleWith: nil)!
#else
        self.init()
#endif
    }

}

@available(iOS 13.0, macOS 10.15, tvOS 13.0, watchOS 6.0, *)
extension SwiftUI.Image {

    /// Initialize an `Image` with an image resource.
    init(_ resource: ImageResource) {
        self.init(resource.name, bundle: resource.bundle)
    }

}
```

ä¸Šé¢è¿™äº›æ˜¯åŸºæœ¬çš„å·¥å…·æ–¹æ³•ï¼Œå…·ä½“çš„ Assets åç§°æ˜¯å­˜åœ¨äº `ImageResource` çš„ï¼Œç»‘å®šå¸¸é‡å’Œåç§°ã€‚

```swift
// MARK: - Image Symbols -

@available(iOS 11.0, macOS 10.7, tvOS 11.0, *)
extension ImageResource {

    /// The "baseline_bookmarks_black_48pt" asset catalog image resource.
    static let baselineBookmarksBlack48Pt = ImageResource(name: "baseline_bookmarks_black_48pt", bundle: resourceBundle)

    /// The "tab-bookmarks" asset catalog image resource.
    static let tabBookmarks = ImageResource(name: "tab-bookmarks", bundle: resourceBundle)

    /// The "About" asset catalog image resource.
    static let about = ImageResource(name: "About", bundle: resourceBundle)

}
```

æ³¨æ„ä¸Šé¢çš„åç§°è½¬åŒ–ä¸ºå¸¸é‡çš„è§„åˆ™ï¼Œæˆ‘è‡ªå·±è§‚å¯Ÿä¸‹æ¥æœ‰ç‚¹ç±»ä¼¼ Codable JSON è½¬ model çš„è§„åˆ™ï¼š

- é©¼å³°å‘½å

- ä¸‹åˆ’çº¿å’Œæ¨ªçº¿ä¼šè‡ªåŠ¨å¿½ç•¥æ‰

- Color Set çš„åç§°ä¸­å¸¦æœ‰"Color"çš„ä¼šå¿½ç•¥æ‰å…¶ä¸­çš„"Color"

  ```swift
  @available(iOS 11.0, macOS 10.13, tvOS 11.0, *)
  extension ColorResource {

      /// The "MainColor" asset catalog color resource.
      static let main = ColorResource(name: "MainColor", bundle: resourceBundle)

  }
  ```

**è¿™æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ**

- è¿™äº›è‡ªåŠ¨ç”Ÿæˆçš„å¸¸é‡èƒ½å¤Ÿåˆ©ç”¨ Code Complete çš„æé†’åŠŸèƒ½ï¼Œä¸éœ€è¦åˆ‡æ¢æ–‡ä»¶å¤åˆ¶åç§°ç­‰æ“ä½œ
- å½“æˆ‘ä»¬åšä¸€äº›èµ„æºæ¸…ç†æ—¶ï¼Œå¾ˆå¿«å°±èƒ½çŸ¥é“å“ªäº›èµ„æºæ˜¯æ²¡æœ‰ç”¨åˆ°çš„ï¼Œå³è‡ªåŠ¨ç”Ÿæˆçš„å¸¸é‡æ²¡æœ‰è¢«å¼•ç”¨
- å‡å°‘å­—ç¬¦ä¸²ç¡¬ç¼–ç ï¼Œåœ¨ç¼–è¯‘æœŸå¯ä»¥æ£€æµ‹åç§°æ˜¯å¦æ­£ç¡®ã€‚æ¯”å¦‚ï¼Œå½“ä½ æ”¹äº†å›¾ç‰‡åå­—æ—¶ï¼Œå†æ¬¡ç¼–è¯‘ä¼šè‡ªåŠ¨ç»™ä½ ç”Ÿæˆä¸€ä¸ªæ–°åç§°çš„å¸¸é‡ï¼Œè¿™æ ·å¯ä»¥åœ¨ç¼–è¯‘æœŸæŠ¥é”™äº†ï¼Œå¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œå°±å¿…é¡»å…¨å±€æœç´¢ã€‚

è¿™ä¸ªåŠŸèƒ½ä¹Ÿå¯ä»¥ç”¨äº UIKit ï¼Œå¹¶ä¸”æ˜¯ iOS 11.0 ä»¥ä¸Šå°±æ”¯æŒçš„ï¼Œç‚¹èµï¼

![alt text](https://cdn.zhangwen.site/uPic/image-20230610134336645.png)

å”¯ä¸€è®©æˆ‘è§‰å¾—é—æ†¾çš„åœ°æ–¹æ˜¯æ²¡æœ‰å¯¹æœ‰ç›®å½•çš„ Image å¢åŠ å‘½åç©ºé—´çš„æ¦‚å¿µï¼Œæ¯”å¦‚ä¸Šé¢æåˆ°çš„å¸¦ "Home" ç›®å½•çš„"tab-bookmarks" Imageï¼ŒXcode æ˜¯ç›´æ¥å–çš„ "tab-bookmarks" æ¥è§£æï¼Œå¿½ç•¥äº†"Home"å±‚çº§ã€‚å®é™…ä¸Šå¤§éƒ¨åˆ†æƒ…å†µï¼Œæˆ‘ä»¬ä¼šå¯¹å›¾ç‰‡èµ„æºä¹Ÿè¿›è¡Œåˆ†çº§ï¼Œæ¯”å¦‚è¿™æ ·ï¼š

![alt text](https://cdn.zhangwen.site/uPic/image-20230610190157193.png)

åœ¨ Xcode 14 åŒ…æ‹¬ä»¥å‰çš„ç‰ˆæœ¬ï¼Œæˆ‘ä¹ æƒ¯äºç”¨ [SwiftGen](https://github.com/SwiftGen/SwiftGen) æ¥è‡ªåŠ¨ç”Ÿæˆä¸€äº›å¸¸é‡ï¼ŒåŠŸèƒ½æ¯” Xcode 15 æ›´å¼ºå¤§ï¼Œæ”¯æŒä»¥ä¸‹ç±»å‹ï¼š

- [Assets Catalogs](https://github.com/SwiftGen/SwiftGen#asset-catalog)
- [Colors](https://github.com/SwiftGen/SwiftGen#colors)
- [Core Data](https://github.com/SwiftGen/SwiftGen#core-data)
- [Files](https://github.com/SwiftGen/SwiftGen#files)
- [Fonts](https://github.com/SwiftGen/SwiftGen#fonts)
- [Interface Builder files](https://github.com/SwiftGen/SwiftGen#interface-builder)
- [JSON and YAML files](https://github.com/SwiftGen/SwiftGen#json-and-yaml)
- [Plists](https://github.com/SwiftGen/SwiftGen#plists)
- [Localizable strings](https://github.com/SwiftGen/SwiftGen#strings)

SwiftGen æ—¢æ”¯æŒ Xcode 15 è¿™ç§æ‰å¹³åŒ–çš„æ–¹å¼ï¼Œä¹Ÿæ”¯æŒç›®å½•å±‚çº§çš„æ–¹å¼ã€‚å±‚çº§æ¨¡å¼ç”Ÿæˆçš„ä»£ç å¤§æ¦‚å¦‚ä¸‹ï¼š

```swift
internal enum Asset {
    internal enum Home {
    internal static let alarmRing = ImageAsset(name: "alarm_ring")
    internal static let battery1 = ImageAsset(name: "battery1")
  }
}

internal struct ImageAsset {
  internal fileprivate(set) var name: String
  internal typealias Image = UIImage

  @available(iOS 8.0, tvOS 9.0, watchOS 2.0, macOS 10.7, *)
  internal var image: Image {
    let bundle = BundleToken.bundle
    let image = Image(named: name, in: bundle, compatibleWith: nil)
    guard let result = image else {
      fatalError("Unable to load image asset named \(name).")
    }
    return result
  }
}
```

ä½¿ç”¨èµ·æ¥ä¹Ÿå¾ˆç®€å•:

```swift
let imageView = UIImageView(image: Asset.Home.alarmRing.image)
```

## [Meet string catalogs](https://developer.apple.com/videos/play/wwdc2023/10165/?time=270)

è¿™æ˜¯ä¸€ä¸ªæ–°çš„ç®¡ç†ç¿»è¯‘å­—ç¬¦ä¸²çš„æ–¹å¼ï¼Œé‡‡ç”¨æ–°çš„æ–‡ä»¶æ ¼å¼ `.xcstrings`ã€‚ç›¸æ¯” Xcode 15 ä»¥å‰ä½¿ç”¨ä¸åŒè¯­è¨€çš„ç›®å½•çš„æ–¹å¼ï¼Œæ›´åŠ é›†ä¸­ç»Ÿä¸€äº†ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„æ”¹è¿›ã€‚å¦å¤–ï¼Œ**è¿™ä¸ªåŠŸèƒ½æ˜¯å‘åå…¼å®¹çš„ï¼ŒiOS 17 ä»¥å‰ä¹Ÿå¯ä»¥ä½¿ç”¨**ï¼ŒğŸ‘ğŸ»ï¼

`.xcstrings`æ–‡ä»¶å®é™…ä¸Šæ˜¯ JSON æ–‡ä»¶ï¼Œç»ˆäºä¸æ˜¯ Xcode ç¥–ä¼ çš„ XML æ ¼å¼ï¼ŒGit ç‰ˆæœ¬åŒ–å°±æ–¹ä¾¿å¤šäº†ï¼Œæ„Ÿæ¿€æ¶•é›¶ã€‚

æ–°å»ºæ–‡ä»¶é€šè¿‡ "File" -> "New" -> "File" ï¼Œç„¶åè¾“å…¥ `string` è¿‡æ»¤ï¼Œä¸‹é¢å›¾ç¤ºã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°é»˜è®¤å°±æ˜¯ String Catalog äº†ï¼ŒStrings File å’Œ StringsDict éƒ½å˜æˆäº† **Legacy** ï¼ŒNext ä¹‹åç”Ÿæˆçš„é»˜è®¤æ–‡ä»¶åä¾ç„¶æ˜¯"Localizable"ï¼Œè¿™ä¸ªå°±æœ€å¥½ä¸æ”¹äº†ã€‚

![alt text](https://cdn.zhangwen.site/uPic/image-20230611085009588.png)

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å…ˆæ¥å­¦ä¹ ä¸€ä¸‹æ–°çš„ç•Œé¢æ“ä½œï¼Œé¦–å…ˆä¾ç„¶ä¼šæœ‰ä¸€ä¸ª Base çš„æ¦‚å¿µï¼Œå°±æ˜¯å…¶ä»–è¯­è¨€æ ¹æ® Base æ¥ç¿»è¯‘ï¼Œé»˜è®¤æ˜¯ Englishã€‚

åœ¨ Xcode 15 ä»¥å‰ï¼Œè¿™ä¸ª Base åŸºæœ¬ä¸Šä¸æ”¹ï¼Œä½†æ˜¯ Xcode 15 å¤šäº†ä¸€ä¸ªé»˜è®¤è¯­è¨€çš„ä¿®æ”¹ï¼Œä½ å¯ä»¥é€šè¿‡"Set Default" æ¥æ”¹æˆç®€ä½“ä¸­æ–‡ä¸ºé»˜è®¤ã€‚

![alt text](https://cdn.zhangwen.site/uPic/image-20230610233540449.png)

ä¸‹é¢è¿™ä¸¤ä¸ªæ˜¯ é€‰ä¸­`Localizable.xcstrings` çš„ç•Œé¢ï¼Œç›¸å¯¹æ¥è¯´è¿˜æ˜¯æ¯”è¾ƒæ˜äº†çš„ã€‚

![alt text](https://cdn.zhangwen.site/uPic/image-20230610195409197.png)

è¿™é‡Œé€‰æ‹© English ä¸ºé»˜è®¤è¯­è¨€ï¼Œå½“æˆ‘ä»¬åˆ‡æ¢åˆ°ä¸­æ–‡ç®€ä½“çš„æ—¶å€™ï¼Œåˆ—è¡¨é¡¹å¤šäº†ä¸€ä¸ª "**Default Localization(en)**"ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥å¯¹æ¯”ä¸€ä¸‹å½“å‰è¯­è¨€çš„ç¿»è¯‘å’Œé»˜è®¤è¯­è¨€çš„æ¯”å¯¹ã€‚

![alt text](https://cdn.zhangwen.site/uPic/image-20230610195440560.png)

**ç¿»è¯‘çŠ¶æ€**

æ¯ä¸€ä¸ªç¿»è¯‘å­—ç¬¦ä¸²éƒ½æœ‰ä¸€ä¸ª State å­—æ®µï¼Œè¡¨ç¤ºå½“å‰çš„ç¿»è¯‘çŠ¶æ€ï¼Œå…·ä½“çš„æœ‰ä»¥ä¸‹å‡ ç§ï¼š

![alt text](https://cdn.zhangwen.site/uPic/image-20230610213906598.png)

æ–°åŠ çš„ Key è‚¯å®šæ˜¯ **New** äº†ï¼Œå½“ä½ å¯¹æŸä¸ª Key æ”¹åŠ¨äº†å°±å˜æˆ**NEEDS REVIEW** ï¼Œå½“å·¦å³è¯­è¨€éƒ½ç¿»è¯‘å®Œäº†å°±æ˜¯ âœ…ã€‚

è¿™é‡Œç‰¹åˆ«è¯´æ˜ä¸€ä¸‹ **STALE** çŠ¶æ€çš„ï¼Œè¡¨ç¤ºä½ æ·»åŠ äº† Keyï¼Œä½†æ˜¯å¹¶æ²¡æœ‰åœ¨ä»£ç é‡Œè°ƒç”¨ï¼Œæœ‰ç‚¹åºŸå¼ƒ(Deprecated)çš„æ„æ€ã€‚å½“æˆ‘ä»¬æƒ³è¦æ¸…ç†ä¸€ä¸‹åºŸå¼ƒèµ„æºçš„æ—¶å€™ï¼Œè¿™ä¸ªçŠ¶æ€å°±å¾ˆå¥½ç”¨ã€‚

> åœ¨ä½¿ç”¨ Xcode 15 çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘åˆ é™¤äº†æŸäº› Keyï¼Œä½†æ˜¯æ²¡æœ‰åœ¨ä»£ç é‡Œåˆ é™¤å¯¹åº”çš„ä»£ç ï¼Œå› ä¸ºæ˜¯å­—ç¬¦ä¸²ï¼Œç¼–è¯‘ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯ Xcode 15 è‡ªåŠ¨ç»™æˆ‘åœ¨ String Catalogs é‡Œé¢æ·»åŠ äº†å¯¹åº”çš„ Keyï¼Œä¹Ÿå°±æ˜¯è¯´ä½ ä¹Ÿå¯ä»¥åœ¨ä»£ç é‡Œå…ˆå†™ Keyï¼ŒBuild ä¹‹ååœ¨ String Catalogs é‡Œé¢ç¼–è¾‘ã€‚å“‡å¡ï¼Œè¿˜æœ‰ä¸€ä¸ªåå‘çš„æ“ä½œï¼Œç–¯ç‹‚ç‚¹èµï¼

è¿™æœ‰ç‚¹ç±»ä¼¼äºå•å…ƒæµ‹è¯•çš„çŠ¶æ€ã€‚

**å¤æ•°é—®é¢˜**

å½“ Key é‡Œé¢åŒ…å«æ•°é‡çš„å‚æ•°æ—¶ï¼Œè¦æ³¨æ„å¤„ç†è‹±è¯­å›½å®¶çš„å¤æ•°é—®é¢˜ï¼Œæ¯”å¦‚ one day å’Œ two daysï¼Œå¦‚æœä½ çš„é¡¹ç›®è¦æ±‚æ¯”è¾ƒä¸¥æ ¼çš„è¯ï¼ŒæŒ‰ç…§ Xcode 15 ä»¥å‰çš„è¯ï¼Œstrings æ ¼å¼çš„éœ€è¦æ·»åŠ ä¸¤ä¸ªä¸€æ · Key æ¥å¤„ç†å¤æ•°é—®é¢˜ï¼Œæˆ–è€…ä½¿ç”¨ stringsdict è¿™ä¹ˆæ¥å¤„ç†ï¼š

![alt text](https://cdn.zhangwen.site/uPic/image-20230610214258044.png)

è¿™ä¸ªåŠŸèƒ½åœ¨ Xcode 15 å°±éå¸¸ç®€å•äº†ï¼Œå¯¹éœ€è¦å¤„ç†å¤æ•°çš„ Keyï¼Œå³é”®é€‰æ‹©"Vary By Plural"

![alert text](https://cdn.zhangwen.site/uPic/image-20230610215043187.png)

Xcode ä¼šå¸®ä½ è‡ªåŠ¨ç»†åˆ†æˆä¸¤ç§ï¼šOneï¼ŒOtherã€‚

![alert text](https://cdn.zhangwen.site/uPic/image-20230610222417189.png)

è¿˜æœ‰ä¸€ä¸ªæƒ…å†µæ˜¯åœ¨ä»¥å‰ `.strings` åŸºæœ¬ä¸Šæ²¡æ³•å¤„ç†çš„é—®é¢˜ï¼Œä¸€å¥è¯é‡Œé¢åŒ…å« 2 ä¸ªæˆ–è€… 2 ä¸ªä»¥ä¸Šçš„æ•°é‡å‚æ•°ï¼Œè¿™æ—¶å€™è¦å¤„ç†å¤æ•°å°±è¦æŠ“å¤´äº†ï¼Œæ–¹æ³•ä¹Ÿæ˜¯éå¸¸å•°å—¦ï¼Œä¸å¤Ÿä¼˜é›…ï¼Œåªèƒ½ä½¿ç”¨`.stringsdict`ã€‚å¥½åœ¨ Xcode 15 ä¹Ÿå¸®æˆ‘ä»¬è€ƒè™‘äº†è¿™ç§æƒ…å†µï¼Œå®ƒå¯ä»¥ **Vary By Plural** ä¸¤ä¸ªå‚æ•°ä»¥ä¸Šã€‚

å‡å¦‚æˆ‘ä»¬æœ‰ä¸€å¥è¯æ˜¯ **_There are %lld boys and %lld girls in this class_**ï¼Œé€šè¿‡ä¸‹é¢å›¾ç¤ºçš„æ–¹æ³•ä¸¤æ¬¡ Vary äº†ã€‚

![alert text](https://cdn.zhangwen.site/uPic/image-20230610222030301.png)

ç»“æœå°±ä¼šæœ‰ `@arg1` å’Œ `@arg2` ä¸¤ä¸ªå‚æ•°ï¼Œç„¶åæˆ‘ä»¬å°†è¦å¤„ç†å¤æ•°çš„ "boys" å’Œ "girls" æŒªåˆ°ä¸‹é¢çš„å‚æ•°ï¼Œå¹¶å¤„ç†å¯¹åº”çš„ å¤æ•° `s`é—®é¢˜ã€‚

![alert text](https://cdn.zhangwen.site/uPic/image-20230610230026013.png)

Xcode 15 è¿˜æ”¯æŒè‡ªå®šä¹‰ `@arg1` å’Œ `@arg2` çš„åç§°ï¼Œæ¯”å¦‚ä½ å¯ä»¥æ”¹æˆæ›´å¥½é˜…è¯»çš„ `@boys` å’Œ `@girls` ã€‚ä½†æ˜¯è¿™ä¸ªæœ€å¥½ä¸è¦å°è¯•ï¼Œå› ä¸ºæˆ‘é‡åˆ°äº†å‡ æ¬¡å´©æºƒï¼Œè¿™ä¸€å—çš„è¿˜æœ‰å¾…å®Œå–„ã€‚

**è€é¡¹ç›®è¿ç§»**

è€çš„é¡¹ç›®å¯ä»¥é€šè¿‡ç‚¹å‡»"Edit"-> "Convert" -> "To String Catalogs" ï¼Œç•Œé¢å‡ºæ¥ä¹‹åä¼šè®©ä½ é€‰æ‹© Targetï¼Œç„¶åé€‰æ‹©ä¸‹ä¸€æ­¥é€‰æ‹©éœ€è¦è½¬æ¢çš„æ–‡ä»¶ï¼ŒåŒ…æ‹¬`Info.plist` å’Œ `Localizable.strings`ã€‚

å‡å¦‚ç›®å‰æœ‰ä¸€ä¸ªè€é¡¹ç›®ï¼Œæ”¯æŒç®€ä½“ã€ç¹ä½“ã€è‹±è¯­è¿™ 3 ç§è¯­è¨€ï¼Œé€šè¿‡è½¬æ¢ä¹‹åä¼šç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼š`InfoPlist.xcstrings` å’Œ `Localizable.xcstrings`ï¼Œåœ¨"Base.lproj"ã€"zh-Hans.lproj"ã€"zh-Hant.lproj"ç­‰æ—§çš„".strings"æ–‡ä»¶ä¼šè¢«åˆ é™¤ã€‚

**å…¶ä»–åŠŸèƒ½**

- å¯ä»¥åœ¨æœç´¢æ¡†è¾“å…¥å…³é”®è¯è¿‡æ»¤ï¼Œè¿™ä¸ªå°±æ¯” `.strings` åœ¨æ–‡ä»¶å†…æœç´¢å¥½ç”¨å¤ªå¤šäº†ï¼Œå°¤å…¶æ˜¯åœ¨ä½ æœ‰å‡ åƒä¸ªç¿»è¯‘çš„æ—¶å€™ã€‚
- å¯ä»¥æ‰‹åŠ¨ç®¡ç†æˆ–è€…è‡ªåŠ¨ç®¡ç† State
- é™¤äº†æ·»åŠ ä¼šåŒæ­¥åˆ°æ‰€æœ‰è¯­è¨€ï¼Œåˆ é™¤æŸä¸€ä¸ª Keyï¼Œä¹Ÿä¼šè‡ªåŠ¨åŒæ­¥åˆ°å…¶ä»–è¯­è¨€ä¸Šï¼Œè¿™ä¸ªä¹Ÿæ¯” `.strings` æŒ¨ä¸ªå»åˆ é™¤æ–¹ä¾¿
- å¯ä»¥æŒ‰ç…§ State çš„çŠ¶æ€æ’åºï¼Œæ¯”å¦‚æ²¡æœ‰ Review çš„æ’åœ¨å‰é¢ã€‚
- æ‰€æœ‰ Key çš„æ€»ä½“ç¿»è¯‘è¿›åº¦ï¼Œå¯ä»¥æŒ‰è¯­è¨€æ˜¾ç¤ºç™¾åˆ†æ¯”
- `Comment` å­—æ®µå¯ä»¥æ·»åŠ ç›¸å…³è¯´æ˜æ³¨é‡Šï¼Œè¿™ä¸ªä¹Ÿæ˜¯å¥½è¯„ï¼Œå¯ä»¥è§£é‡Šä¸€ä¸‹è¿™ä¸ª Key ç”¨åœ¨ä»€ä¹ˆåœºæ™¯ä¸‹
- å¯¼å…¥å¯¼å‡ºåŠŸèƒ½ï¼Œæ–‡ä»¶æ ¼å¼æ˜¯`.xliff`ï¼Œä¸“ä¸šçš„ç¿»è¯‘æ ¼å¼
- `Vary By Device` åˆ†è®¾å¤‡ç±»å‹çš„ç¿»è¯‘ï¼Œæ¯”å¦‚ Apple Watch éœ€è¦æ›´çŸ­çš„ç¿»è¯‘ï¼Œä½†è¿™ç§åœºæ™¯ç”¨çš„ä¸å¤š

æ›´å¤šè¯¦ç»†å†…å®¹è¯·å‚è€ƒ: [Discover String Catalogs](https://developer.apple.com/wwdc23/10155)

**é—æ†¾**

æ€»ä½“æ¥è¯´ï¼Œæˆ‘æ˜¯å¯¹ String Catalogs æ˜¯éå¸¸æ»¡æ„çš„ï¼Œç¨å¾®é—æ†¾çš„å°±æ˜¯æ²¡æœ‰åƒ Assets ä¸€æ ·å¯ä»¥ Generate Codeï¼Œè‡ªåŠ¨ç”Ÿæˆä¸€äº›æ²¡æœ‰å‚æ•°çš„å¸¸é‡ï¼Œæˆ–è€…ç”Ÿæˆå¸¦å‚æ•°çš„å‡½æ•°ã€‚

å¦‚æœæ˜¯ Xcode 14ï¼Œæˆ‘å»ºè®®ä½¿ç”¨ **[Localization Editor](https://github.com/igorkulman/iOSLocalizationEditor)** æ¥ç¼–è¾‘ç¿»è¯‘å­—ç¬¦ä¸²ï¼Œä¸»ç•Œé¢å¦‚ä¸‹å›¾ï¼Œå°†æ‰€æœ‰è¯­è¨€å¹³é“ºåœ¨ä¸€èµ·ï¼Œä¹Ÿæœ‰æ³¨é‡ŠåŠŸèƒ½ï¼Œæ‰€æœ‰ç¼–è¾‘æ“ä½œå®æ—¶åŒæ­¥åˆ° `.strings`æ–‡ä»¶ã€‚

![alert text](https://cdn.zhangwen.site/uPic/image-20230611093039982.png)

æ³¨æ„ä¸€ä¸‹ï¼Œçœ‹æˆ‘çš„ Key æ˜¯è®¾ç½®æˆ"auth.btn.login"è¿™æ ·çš„ï¼Œå› ä¸ºæˆ‘å€ŸåŠ©ä¸Šé¢æåˆ°è¿‡çš„ [SwiftGen](https://github.com/SwiftGen/SwiftGen) ï¼Œä¼šå¸®æˆ‘è‡ªåŠ¨ç”Ÿæˆä»£ç ï¼Œè¿˜å¯ä»¥è‡ªå®šä¹‰å‡½æ•°åç§°ï¼Œè¿™æ ·å¯ä»¥åšåˆ°åŠ¨æ€åŠ è½½ä¸åŒè¯­è¨€çš„ç¿»è¯‘æ•ˆæœã€‚å®é™…è°ƒç”¨æ—¶çš„ä»£ç å¦‚ä¸‹ï¼š

```swift
// MARK: - SwiftGen
// ç¼©å†™ç®€åŒ–
typealias L = L10n.Localizable
// è‡ªå®šä¹‰æŸ¥è¯¢å‡½æ•°
func customLookup(_ key: String, _ table: String, _ fallback: String) -> String {
    L10nManager.shared.get(key) ?? ""
}

// ä¸‹é¢æ˜¯å®é™…è°ƒç”¨çš„ä»£ç 
signUpButton.setTitle(L.Auth.Login.registerNewAccount, for: .normal)
forgetPasswordButton.setTitle(L.Auth.Btn.forgetPsd, for: .normal)
passwordTextField.placeholder = L.Auth.Password.placeholder
```

SwiftGen å¯¹æ²¡æœ‰å‚æ•°çš„ä¼šç”Ÿæˆä¸€ä¸ª enum çš„ `static var`ï¼Œå¯¹äºä¸­é—´çš„ç‚¹åˆ†å‰²éƒ¨åˆ†ï¼Œä¼šä¾æ¬¡ç”Ÿæˆä¸€ä¸ªå†…éƒ¨ enumï¼Œè¾¾åˆ°å‘½åç©ºé—´çš„æ•ˆæœã€‚

```
/// è¯·è¾“å…¥å¯†ç 
internal static var placeholder: String { return L10n.tr("Localizable", "auth.password.placeholder", fallback: "Enter password") }

```

## [What's new in Swift-DocC](https://developer.apple.com/videos/play/wwdc2023/10165/?time=325)

ä¸»è¦æ˜¯æ›´æ–°äº†ä¸€ä¸ªå®æ—¶é¢„è§ˆçš„åŠŸèƒ½ï¼Œä½œç”¨ä¸å¤§ã€‚

![alert text](https://cdn.zhangwen.site/uPic/image-20230611100355093.png)

## [Meet Swift macros](https://developer.apple.com/videos/play/wwdc2023/10165/?time=421)

è¿™ä¸ªå®å°±å¼ºå¤§äº†ï¼Œå€¼å¾—å•å¼€ä¸€ç¯‡æ–‡ç« æ¥è¯¦ç»†è¯´ä¸€è¯´ï¼Œæ¯”å¦‚æœ‰ä»¥ä¸‹ä¸€äº›å¥½ç”¨åˆ°çˆ†ç‚¸çš„å†…ç½®å®

- `Observable` : ç€å®ç®€åŒ–äº† `@Published` å˜é‡
- `#Predicate` : æŸ¥è¯¢è¿‡æ»¤æœ‰ç±»å‹æ£€æŸ¥äº†ï¼Œä¸éœ€è¦é€šè¿‡ NSPredicate å­—ç¬¦ä¸²çš„å½¢å¼
- `Model` : ç”¨äº SwiftDataï¼ŒCoreData çš„ Swift ç‰ˆæœ¬

ä½†æ˜¯æ²¡å•¥ç”¨ï¼Œå› ä¸ºä¸å‘åå…¼å®¹ï¼Œåªæ”¯æŒ iOS 17ğŸ˜­ã€‚

## [What's new in Previews](https://developer.apple.com/videos/play/wwdc2023/10165/?time=520)

é¢„è§ˆåœ¨ SwiftUI æ˜¯å¾ˆæ–¹ä¾¿çš„ï¼Œä¸€è¾¹å†™ä»£ç ä¸€è¾¹é¢„è§ˆæ•ˆæœï¼ŒDSL çš„ UI å°±æ˜¯è¿™ä¹ˆä¾¿æ·ã€‚
ä½†æ˜¯æƒ³è¦è®© UIView å’Œ UIViewController ä¹Ÿæœ‰é¢„è§ˆåŠŸèƒ½ï¼Œä»¥å‰åªèƒ½ä½¿ç”¨ storyboard æˆ–è€… xib äº†ã€‚ä½†æ˜¯å¯¹é‚£äº›ä»£ç å…šæ¥è¯´ï¼Œè¿™å°±å¾ˆéš¾å—äº†ï¼Œä¸è¿è¡Œé¡¹ç›®æ˜¯çœ‹ä¸åˆ°æ•ˆæœçš„ã€‚æ‰€ä»¥ï¼Œ[InjectionIII](https://github.com/johnno1962/InjectionIII/) è¿™ä¸ªå·¥å…·è¯ç”Ÿäº†ï¼Œé€šè¿‡æ³¨å…¥ framework çš„å½¢å¼ï¼Œä¿®æ”¹è¿è¡ŒæœŸä»£ç ã€‚ä½†è¿™ä¸ªå·¥å…·éœ€è¦ä¾µå…¥ä»£ç ï¼Œä¸æ˜¯ç‰¹åˆ«å¥½ï¼Œç¨³å®šæ€§ä¹Ÿä¸å¤Ÿã€‚

Xcode 15 å€ŸåŠ© Swift macro åŠŸèƒ½ï¼Œæ–°å¢äº†ä¸€ä¸ª `#Preview` å®ï¼Œå¯ä»¥æ”¯æŒ UIKit çš„é¢„è§ˆäº†

```swift
#Preview {
	// LoginViewController åŒ…å« 2 ä¸ª UITextField å’Œ 1 ä¸ª Button
	// ä¸‰ä¸ªå­Viewéƒ½æ˜¯è·Viewå·¦å³è¾¹ç•Œ 30 ptã€‚
  let controller = LoginViewController()
  return controller
}
```

é¢„è§ˆç»“æœä¸ç†æƒ³ï¼Œçº¦æŸä¸ç”Ÿæ•ˆã€‚å¦å¤–è¿™ä¸ªåŠŸèƒ½åªæ”¯æŒ iOS 17ï¼Œå› ä¸ºæ˜¯ macro å®ç°çš„ã€‚

![alert text](https://cdn.zhangwen.site/uPic/image-20230611110429982.png)

ä½†æ˜¯æˆ‘ä»¬å¯ä»¥å€ŸåŠ© SwiftUI çš„é¢„è§ˆåŠŸèƒ½ï¼Œå°† UIView æˆ–è€… UIViewController ç”¨ SwiftUI çš„ View å°è£…ä¸€å±‚ã€‚ä¸‹é¢ç®€å•å†™ä¸€ä¸ªæ–¹æ³•ï¼š

```swift
import SwiftUI
import UIKit

// åˆ›å»ºä¸€ä¸ªSwiftUIçš„å®¹å™¨Viewï¼Œå°†UIViewControleråŒ…å«åœ¨å†…
struct PreviewContainer<T: UIViewController>: UIViewControllerRepresentable {
    let viewController: T

    init(_ viewControllerBuilder: @escaping () -> T) {
        viewController = viewControllerBuilder()
    }

    // MARK: - UIViewControllerRepresentable
    func makeUIViewController(context: Context) -> T {
        return viewController
    }

    func updateUIViewController(_ uiViewController: T, context: Context) {}
}
```

ç„¶åå°±å¯ä»¥åƒç”¨ SwiftUI çš„é¢„è§ˆåŠŸèƒ½ä¸€æ ·äº†ï¼š

```swift
struct ViewController_Previews: PreviewProvider {
    static var previews: some View {
        PreviewContainer {
            let controller = LoginViewController()
            return controller
        }
    }
}
```

![alert text](https://cdn.zhangwen.site/uPic/image-20230611111104617.png)

é‡‡ç”¨è¿™ç§æ–¹å¼ï¼Œå°±ä¸ä¼šæœ‰çº¦æŸå¤±æ•ˆçš„é—®é¢˜äº†ï¼Œè€Œä¸”è¿˜å¯ä»¥æ”¯æŒåˆ° iOS 13ï¼Œå®Œç¾ï¼

## [The bookmark navigator](https://developer.apple.com/videos/play/wwdc2023/10165/?time=600)

Xcode 15 æ–°å¢çš„ä¹¦ç­¾åŠŸèƒ½å°±æ˜¯ç»™ä»£ç åšä¸ªæ ‡è®°ï¼Œå¯ä»¥å¿«é€Ÿå®šä½ä½ ç»å¸¸éœ€è¦è®¿é—®çš„ä»£ç è¡Œã€æºæ–‡ä»¶ï¼Œæˆ–è€…ç‰¹åˆ«æ ‡è®°çš„ä¸œè¥¿ï¼Œæ¯”å¦‚ TODOã€FIXME ç­‰ã€‚

ä¹¦ç­¾ç•Œé¢ä½äºå·¦ä¾§å¯¼èˆªè§†å›¾çš„ç¬¬ä¸‰ä¸ªä½ç½®ï¼Œè¿™é‡Œçš„ä½ç½®å¯ç”¨å¿«æ·é”®`Commmand + æ•°å­—` åˆ‡æ¢ã€‚

![alert text](https://cdn.zhangwen.site/uPic/image-20230611212326905.png)

å…·ä½“çš„åŠŸèƒ½æœ‰ä»¥ä¸‹è¿™äº›ï¼š

- å¯¹ä»£ç è¡Œæ·»åŠ ä¹¦ç­¾ï¼Œå³é”®é€‰æ‹©å…·ä½“çš„ä»£ç è¡Œ
- å¯¹æ–‡ä»¶æ·»åŠ ä¹¦ç­¾ï¼Œå³é”®é€‰æ‹©æ–‡ä»¶å³å¯
- å¯å¯¹ä¹¦ç­¾æ·»åŠ æè¿°ä¿¡æ¯ï¼Œé€‰ä¸­å Enter å¥ï¼Œæˆ–è€…åœ¨ Editor ç‚¹å‡»ä»£ç è¡Œå³ä¾§çš„ä¹¦ç­¾å›¾æ ‡
- å¯å°†ä¹¦ç­¾åˆ†ç»„å¹¶é‡å‘½å
- å¯å°†ä¹¦ç­¾"Mark as Complete" æˆ–è€… "Mark as Incomplete"ï¼Œè¿™æ˜¯å½“åšä»»åŠ¡ä½¿ç”¨äº†ï¼Œä½†æ˜¯ç”¨çš„ä¸å¤šå§ï¼Œå› ä¸ºæ²¡æœ‰åœ¨ Editor ä¸Šæ˜¾ç¤º"Complete"æˆ–ç€"Incomplete"çŠ¶æ€
- **å¯å°†æœç´¢ç»“æœæ·»åŠ åˆ°ä¹¦ç­¾**ï¼Œè¿™æ ·å¯ä»¥é¿å…é‡å¤æœç´¢å†…å®¹ï¼Œåªè¦ç‚¹å‡»ä¸€ä¸‹å³è¾¹çš„åˆ·æ–°æŒ‰é’®ï¼Œæ–°å¢çš„ç»“æœè‡ªåŠ¨å‡ºç°åœ¨è¿™é‡Œã€‚

è¦æŠŠä¹¦ç­¾åŠŸèƒ½ç”¨å¥½ï¼Œä¸€å®šè¦å­¦ä¹ ä¸‹é¢è¿™å‡ ä¸ªæ ‡è®°ç¬¦å·ï¼Œå› ä¸ºè¿™ç®—æ˜¯è¡Œä¸šå…±è¯†äº†ï¼Œæ— è®ºç”¨ VS Code æˆ–è€… Android Studioï¼Œéƒ½èƒ½è¯†åˆ«åˆ°è¿™äº›ç¬¦å·ï¼Œå¹¶è¿›è¡Œç»Ÿè®¡ã€‚

- `// MARK:` æ ‡è®°
- `// TODO:` æ ‡è¯†å°†æ¥è¦å®Œæˆçš„å†…å®¹
- `// FIXME:`æ ‡è¯†ä»¥åè¦ä¿®æ­£æˆ–å®Œå–„çš„å†…å®¹
- `// ???:` ç–‘é—®çš„åœ°æ–¹
- `// !!!:` éœ€è¦æ³¨æ„çš„åœ°æ–¹

å¦‚æœæ˜¯ XCode 14ï¼Œé™¤äº†ä¸Šé¢è¿™äº›ç¬¦å·æ ‡è®°ï¼Œæˆ‘ä¸€èˆ¬è¿˜ä¼šé…åˆç”¨æ–­ç‚¹æ¥åšä¸€äº›ä¹¦ç­¾åŠŸèƒ½ã€‚

ä¹¦ç­¾åŠŸèƒ½æ˜¯ç”¨æˆ·å±‚çº§çš„ï¼Œæœ‰ä¸€ä¸ª`bookmarks.plist`æ–‡ä»¶æ¥è®°å½•ä¹¦ç­¾ï¼Œæ–‡ä»¶ä½äºä¸‹é¢è¿™ä¸ªåœ°å€ï¼Œä½†æœ€å¥½ä¸è¦åŠ å…¥åˆ°ç‰ˆæœ¬ç®¡ç†é‡Œé¢ã€‚ç±»ä¼¼çš„è¿˜æœ‰æ–­ç‚¹æ–‡ä»¶ `Breakpoints_v2.xcbkptlist`ï¼Œå¯ä»¥ç›´æ¥å°†`xcuserdata/`åŠ å…¥åˆ° `.gitignore` é‡Œé¢è¿‡æ»¤æ‰

```bash
# xxx ä¸ºä½ çš„ç³»ç»Ÿç”¨æˆ·å
/Users/xxx/Xcode15Demo/Xcode15Demo.xcodeproj/project.xcworkspace/xcuserdata/xxx.xcuserdatad/Bookmarks/bookmarks.plist
```

## [What's new in source control](https://developer.apple.com/videos/play/wwdc2023/10165/?time=738)

Xcode 15 å†…ç½®çš„ç‰ˆæœ¬ç®¡ç†å·¥å…·ç»ˆäºå¯ç”¨äº†ï¼ŒçœŸçš„ä¸æ˜¯å¾ˆå–œæ¬¢åœ¨ Source Tree æˆ–è€… Terminal ä¹‹é—´æ¥å›åˆ‡æ¢ç•Œé¢äº†ã€‚

ä¸‹é¢å°±æ˜¯æºç æ§åˆ¶å¯¼èˆªç•Œé¢ï¼Œå¿«æ·é”® `Command + 2`ï¼š

![alert text](https://cdn.zhangwen.site/uPic/image-20230611222744998.png)

"Changes" è§†å›¾çœŸçš„ç¿»å¤©è¦†åœ°çš„å˜åŒ–äº†ï¼Œç®€å•æ¥è¯´å°±æ˜¯è·Ÿ Source Tree å·®ä¸å¤šäº†ï¼Œåªæ¸²æŸ“æ”¹åŠ¨ä»£ç è¡Œçš„ä¸Šä¸‹æ–‡ï¼Œå¤šä½™çš„éšè—ã€‚åƒ Xcode 14 ä¸€æ ·ç‚¹å‡»æ–‡ä»¶ï¼Œå±…ç„¶æŠŠæ•´ä¸ªæ–‡ä»¶å†…å®¹æ¸²æŸ“å‡ºæ¥ï¼ŒçœŸæ˜¯å¤ªå‚»åŠäº†ã€‚è€Œä¸”è¿˜å¯ä»¥æ‹–åŠ¨ä»£ç è¡Œæ•°ä¸Šä¸‹ä¸¤ä¸ªå°å›¾æ ‡ï¼Œæ˜¾ç¤ºæ›´å¤šå†…å®¹ï¼Œæˆ–è€…ç‚¹å‡»å³ä¸Šè§’çš„æ‰©å±•å›¾æ ‡ï¼Œæ˜¾ç¤ºå…¨éƒ¨å†…å®¹ã€‚

å¦å¤–ï¼ŒXcode 14 çš„ **Source Control** èœå•å‡çº§ä¸º Xcode 15 çš„ **Integrate** èœå•ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![alert text](https://cdn.zhangwen.site/uPic/image-20230611223152164.png)

å¤§æ¦‚æœ‰ 2 ä¸ªä¸»è¦å˜åŒ–ï¼š

- Stage å¸¸ç”¨æ“ä½œ
- å†²çªè§£å†³æ“ä½œ
- Xcode Cloud æ•´åˆè¿›è¿™é‡Œäº†

## [What's new in testing](https://developer.apple.com/videos/play/wwdc2023/10165/?time=890)

ä¸»è¦å˜åŒ–å¦‚ä¸‹ï¼š

- æ¯” Xcode 14 å¤š 45% å†…å®¹çš„æµ‹è¯•æŠ¥å‘Š
- å·¦ä¸‹è§’å¯ä»¥è¿‡æ»¤æµ‹è¯•é¡¹ç›®
- "Performance Metrics" æ€§èƒ½æŒ‡æ ‡æ ‡ç­¾
- Test Plan çš„æ”¹è¿›(æ²¡å•¥ç”¨)
- UI Test çš„æ”¹è¿›(æ²¡å•¥ç”¨)

## [Updates in the debug console](https://developer.apple.com/videos/play/wwdc2023/10165/?time=1043)

æœ¬ç« èŠ‚é‡ç‚¹ä»‹ç» `OSLog` ï¼Œä½†æ˜¯ `OSLog` æ˜¯ iOS 15+ çš„ APIï¼Œæ‰€ä»¥æœ‰ç‚¹é¸¡è‚‹ã€‚

`Logger` æ˜¯ iOS 14 + çš„ APIï¼Œç›¸å¯¹å¥½ä¸€ç‚¹ã€‚

> å…³äº Swift Logging çš„æ•´ä¸ªå†å²å˜åŒ–ï¼Œå¯ä»¥çœ‹ Peter Steinberger
> æ–‡ç«  [Logging in Swift](https://steipete.com/posts/logging-in-swift/) ã€‚

ä¸‹é¢æˆ‘ä»¬ç®€å•è¿‡ä¸€ä¸‹ OSLog åœ¨ Xcode 15 çš„å˜åŒ–ï¼Œå…ˆçœ‹å®˜æ–¹çš„ä¾‹å­ï¼š

```swift
import OSLog

let logger = Logger(subsystem: "BackyardBirdsData", category: "Account")

func login(password: String) -> Error? {
    var error: Error? = nil
    logger.info("Logging in user '\(username)'...")

    // ...

    if let error {
        logger.error("User '\(username)' failed to log in. Error: \(error)")
    } else {
        loggedIn = true
        logger.notice("User '\(username)' logged in successfully.")
    }
    return error
}
```

æ•´ä¸ªå˜åŒ–éƒ½ä½“ç°åœ¨ Console çš„ UI ä¸Šï¼Œå¢åŠ äº† Category åˆ†ç±»ã€æ—¥å¿—ç±»å‹çš„è¿‡æ»¤ã€èƒŒæ™¯è‰²ã€è·³è½¬åˆ°ä»£ç è¡Œã€éšç§æ•°æ®å¤„ç†ã€‚

![image-20230612114724021](http://cdn.zhangwen.site/uPic/image-20230612114724021.png)

**SwiftLog**

Apple æœ‰åœ¨ github å¼€æºä¸€ä¸ª [SwiftLog](https://github.com/apple/swift-log/) ï¼Œè¿™æ˜¯ä¸€ä¸ªå‰ç«¯æ¡†æ¶ï¼Œæä¾›äº†æ—¥å¸¸å¼€å‘ä¸­å¸¸ç”¨çš„ä¸Šå±‚æ¥å£ï¼Œä½†æ˜¯éœ€è¦è‡ªå·±ä¾æ® `LogHandler`åè®®å®ç°åç«¯ï¼Œæ¯”å¦‚æ‰“å°åœ¨ Console ï¼Œä¿å­˜åœ¨æ–‡ä»¶ï¼Œè¿˜æ˜¯å‘é€åˆ°æ—¥å¿—æœåŠ¡å™¨ç­‰ã€‚

æœ‰äººä»¥ `OSLog` ä½œä¸ºåç«¯ï¼Œå®ç°äº†ä¸€ä¸ª [LoggingOSLog](https://github.com/chrisaljoudi/swift-log-oslog) å¼€æºåº“ï¼Œåº•å±‚æ—¥å¿—æ‰“å°ä½¿ç”¨ `os_log` ï¼Œä½†æ˜¯å®˜æ–¹å¹¶ä¸æ˜¯å¾ˆæ¨èè¿™æ ·ä½¿ç”¨ï¼Œå› ä¸ºå¤±å»äº†é™æ€å­—ç¬¦ä¸²çš„æ€§èƒ½ï¼Œå…¨æ˜¯åŠ¨æ€çš„å­—ç¬¦ä¸²ï¼Œä»¥åŠéšç§æ•°æ®æ–¹é¢å®Œæˆæš´éœ²äº†ã€‚

**CocoaLumberjack**

æˆ‘ç›¸ä¿¡å¤§éƒ¨åˆ† iOS å¼€å‘è€…çš„æ—¥å¿—å·¥å…·è¿˜æ˜¯ [CocoaLumberjack](https://github.com/CocoaLumberjack/CocoaLumberjack)ï¼Œæ²¡é”™ï¼Œç”¨å®ƒå°±å¤Ÿäº†ã€‚

## Updates in Xcode Cloud distribution

Xcode Cloud åªèƒ½ç”¨äºå¤–ç½‘çš„ git åœ°å€ï¼Œå¯¹äºæˆ‘ä»¬å…¬å¸è¿™ç§å±€åŸŸç½‘éƒ¨ç½²çš„ gitlab æ— æ•ˆï¼Œæ‰€ä»¥å…¬å¸çš„é¡¹ç›®éƒ½æ²¡æœ‰å°è¯•è¿‡ã€‚

ä½†æ˜¯æˆ‘åœ¨ä¸€äº› Side Projects ä¸Šä½¿ç”¨äº†ä¸€ä¸‹ï¼Œæ„Ÿè§‰è¿˜ä¸æ˜¯å¤ªç»™åŠ›ï¼Œé‚æ”¾å¼ƒã€‚

## Signature verification and privacy manifests

æœ¬ç« èŠ‚ä¸»è¦è®¨è®º XCFramework çš„ç­¾åæœ‰æ•ˆæ€§å’Œéšç§æ¸…å•ã€‚

XCFramework çš„ç­¾åæœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯ä½¿ç”¨è‡ªå·±çš„è¯ä¹¦é‡æ–°ç­¾åï¼Œå«åš"self-signed"ï¼ŒXcode 15 ä¼šæ¯”è¾ƒ XCFramework çš„ SHA-256 å€¼ï¼Œè·ŸåˆšåŠ å…¥åˆ°å·¥ç¨‹çš„æ—¶å€™æ˜¯å¦ä¸€è‡´ã€‚å¦ä¸€ç§æ˜¯ XCFramework å¼€å‘è€…è‡ªå·±çš„è¯ä¹¦ç­¾åï¼Œè‹¹æœä¼šæ ¡éªŒè¯ä¹¦çš„æœ‰æ•ˆæ€§ï¼Œæ¯”å¦‚å¯¹æ–¹çš„ Apple Developer Program è¿‡æœŸäº†ï¼Œæˆ–è€…ä»–çš„è¯ä¹¦è¢« revoke äº†ã€‚

Privacy Manifest éšç§æ¸…å•ï¼Œå°±æ˜¯æŠŠ App Store Connect ç½‘é¡µä¸Šçš„éšç§è®¾ç½®é¡¹æ¬åˆ° Xcode å·¥ç¨‹é‡Œé¢ï¼Œæœ‰ä¸€ä¸ª Plist æ–‡ä»¶æ ¼å¼çš„ `PrivacyInfo.xcprivacy` é…ç½®æ–‡ä»¶ï¼Œé‡Œé¢éœ€è¦åˆ—å‡ºå„ä¸ªéšç§æ ‡ç­¾çš„ä½¿ç”¨æƒ…å†µï¼Œä»¥åŠæ˜¯å¦å…è®¸æŸäº›åŸŸåè®¿é—®éšç§ APIã€‚

![alert text](http://cdn.zhangwen.site/uPic/image-20230612165538066.png)

åˆ° 2024 çš„ 4 æœˆä»½å·¦å³ï¼ŒApp å¼€å‘è€… å’Œ SDK å¼€å‘è€…éƒ½è¦é€‚é…è¿™ä¸ªåŠŸèƒ½ï¼Œæ— è®ºæ˜¯æ›´æ–°çš„ App è¿˜æ˜¯æ–°ä¸Šæ¶çš„ App éƒ½è¦æ·»åŠ éšç§æ¸…å•æ–‡ä»¶ã€‚

![alert text](http://cdn.zhangwen.site/uPic/image-20230612163744549.png)

å‚è€ƒèµ„æ–™ï¼š

- [Verify app dependencies with digital signatures](https://wwdc.io/share/wwdc23/10061)
- [Get started with privacy manifests](https://wwdc.io/share/wwdc23/10060)

## What's new in Xcode distribution

Archive ä¹‹åå¤šäº†å‡ ä¸ªæ–°çš„é€‰é¡¹ï¼š

- TestFlight & App Storeï¼šä¸Šä¼ åˆ° TestFlight å’Œ App Storeï¼Œä½¿ç”¨ TestFlight çš„å†…éƒ¨æµ‹è¯•å’Œå¤–éƒ¨æµ‹è¯•ï¼Œå‡†å¤‡å¥½ä¹‹åæäº¤åˆ° App Store

- TestFlight internal only: åªä¸Šä¼ åˆ° TestFlight çš„å†…éƒ¨æµ‹è¯•ï¼Œåˆ†äº«ç»™å›¢é˜Ÿï¼ŒApp Store æäº¤é‡Œé¢ä¸å¯é€‰ï¼Œåœ¨å¼€å‘åˆ†æ”¯ä½¿ç”¨ã€‚

  > ç›®å‰ Beta ç‰ˆæœ¬æ²¡çœ‹åˆ°è¿™ä¸ªé€‰é¡¹ ã€‚

- Release Testingï¼šå¯¼å‡ºä¸€ä¸ªä¼˜åŒ–è¿‡çš„ Release ç‰ˆæœ¬ï¼Œä½¿ç”¨å‘å¸ƒè¯ä¹¦ç­¾åï¼Œåªèƒ½å®‰è£…åœ¨å·²æ³¨å†Œçš„è®¾å¤‡ä¸Š

- Enterpriseï¼šä¼ä¸šç‰ˆè¯ä¹¦å‘å¸ƒ

- Debuggingï¼šå¯¼å‡ºä¸€ä¸ªä¼˜åŒ–è¿‡çš„ Release ç‰ˆæœ¬ï¼Œä½¿ç”¨å¼€å‘è¯ä¹¦ç­¾åï¼Œåªèƒ½å®‰è£…åœ¨å·²æ³¨å†Œçš„è®¾å¤‡ä¸Š

- Custom ï¼šè‡ªå®šä¹‰ Xcode 14 çš„ç•Œé¢

![alert text](http://cdn.zhangwen.site/uPic/image-20230612160215182.png)

**æ‰€æœ‰è¿™äº›å‘å¸ƒé€‰é¡¹éƒ½æ˜¯æµæ°´çº¿æ“ä½œçš„ï¼Œæ— éœ€å…ˆè¿‡å»ä¸€æ ·æ‰‹åŠ¨é€‰æ‹©è¯ä¹¦ï¼Œå‹¾é€‰ï¼Œä¸‹ä¸€æ­¥ç­‰æ‰‹åŠ¨æ¡£ã€‚ç‚¹å‡»"Distribute"æŒ‰é’®ï¼Œå°±æ˜¯è‡ªåŠ¨æ¡£çš„ D æ¡£ï¼Œè‡ªåŠ¨ç­¾åã€åŒ…å«ç¬¦å·è¡¨ã€è‡ªåŠ¨å¢åŠ  Build ç‰ˆæœ¬å·ã€å»é™¤ Swift çš„ç¬¦å·å…¨åŒ…äº†ã€‚**

**Organizer** ç•Œé¢å¢åŠ äº†ä¸€ä¸ª Feedback é€‰é¡¹ï¼Œå…¶å®å°±æ˜¯ TestFlight ç½‘é¡µçš„å†…å®¹æ¬åˆ°è¿™é‡Œæ¥äº†ï¼Œæµ‹è¯•å›¢é˜Ÿæˆªå›¾çš„ APP å†…å®¹å°±æ˜¾ç¤ºåœ¨è¿™é‡Œã€‚

![alert text](http://cdn.zhangwen.site/uPic/image-20230612151752291.png)

## Others

Xcode 15 è¿˜æœ‰äº›å°æ”¹è¿›ï¼Œé™äºæ—¶é•¿å› ç´ åœ¨è§†é¢‘é‡Œæ²¡æœ‰ä½“ç°ã€‚

### Quick Action

æ–°å¢äº†ä¸€ä¸ªç±»ä¼¼ VS Code çš„ **Command Palette** å‘½ä»¤ï¼Œå¿«æ·é”® `Command + Shift + A`ï¼Œä¼šæ‰“å¼€ä¸€ä¸ªæœç´¢æ¡†ï¼Œå¯ä»¥æœç´¢ä»»ä½•èœå•æ“ä½œã€‚è¿™ä¸ªåŠŸèƒ½çš„å¥½å¤„æ˜¯èœå•å¿«æ·é”®å¤ªå¤šäº†ï¼Œå®åœ¨è®°ä¸è¿‡æ¥ã€‚ä¸è¿‡æˆ‘ä¼šæ”¹æ‰è¿™ä¸ªå¿«æ·é”®ï¼Œå˜æˆå’Œ VS Code ä¸€æ ·çš„ `F11`ï¼Œè¿™æ ·æŒ‰ä¸€ä¸‹å°±å¯ä»¥äº†ï¼Œæ›´å¿«æ·ã€‚

![alert text](https://cdn.zhangwen.site/uPic/image-20230611225943093.png)

### Format to multiple lines

è¿™ä¸ªåŠŸèƒ½å¯ä»¥æŠŠå¤šå‚æ•°çš„å‡½æ•°è‡ªåŠ¨æ ¼å¼åŒ–ä¸ºæ¯è¡Œä¸€ä¸ªå‚æ•°ï¼Œæé«˜å¯è¯»æ€§ã€‚

![alert text](https://cdn.zhangwen.site/uPic/fKwaub.png)

æ¯”å¦‚ï¼ŒUIKit çš„ä¸€äº›å‡½æ•°å›è°ƒçœŸçš„åç§°åˆè‡­åˆé•¿ï¼š

```swift
func collectionView(_ collectionView: UICollectionView, willDisplay cell: UICollectionViewCell, forItemAt indexPath: IndexPath) {
    //
}
```

æ ¼å¼åŒ–ä¹‹åå˜æˆä¸‹é¢è¿™æ ·ï¼š

```swift
func collectionView(
    _ collectionView: UICollectionView,
    willDisplay cell: UICollectionViewCell,
    forItemAt indexPath: IndexPath
) {
    //
}
```
